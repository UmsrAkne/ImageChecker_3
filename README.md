# ImageChecker v3 

画像の位置と拡大率を考慮した表示をシミュレートするためのソフト。自分用。

## 使い方

画像ファイルが入ったフォルダをウィンドウにドラッグアンドドロップすると、中の画像が読み込まれる。

画像ファイルは以下の命名規則に沿っていることを想定している。

    [A-D]\d{2}\d{2}$

### 命名規則の各部詳細

この規則に沿っている場合、先頭の `[A-D]` の部分でグループ分けされて画像が読み込まれます。

グループ `A` の画像を選択した時点で、残りのグループの画像が次の `\d{2}` の値でフィルタリングされます。

最後の `\d{2}` は動作に影響しません。画像を識別するための任意の番号を割り振ります。

上記の条件に当てはまらない画像ファイルでも、単体での表示は可能です。

## キーボード操作

以下のキーボードショートカットをサポートしています。

| Key              | 機能                                    |
|------------------|---------------------------------------|
| A                | 次の画像にカーソル移動 (グループA)                   |
| Shift + A        | 前の画像にカーソル移動 (グループA)                   |
| B                | 次の画像にカーソル移動 (グループB)                   |
| Shift + B        | 前の画像にカーソル移動 (グループB)                   |
| C                | 次の画像にカーソル移動 (グループC)                   |
| Shift + C        | 前の画像にカーソル移動 (グループC)                   |
| D                | 次の画像にカーソル移動 (グループD)                   |
| Shift + D        | 前の画像にカーソル移動 (グループD)                   |
| J                | プレビューの位置を上に動かす                        |
| K                | プレビューの位置を下に動かす                        |
| H                | プレビューの位置を左に動かす                        |
| L                | プレビューの位置を右に動かす                        |
| Ctrl + 0         | プレビューの位置初期値に戻す                        |
| Ctrl + 1         | プレビューの位置と拡大率を初期値に戻す                   |
| Ctrl + I         | 現在の表示状態を image タグとしてクリップボードに転送        |
| Ctrl + D         | 現在の表示状態を draw タグとしてクリップボードに転送         |
| Ctrl + Shift + I | 現在の表示状態を image(anime) タグとしてクリップボードに転送 |
| Ctrl + Shift + D | 現在の表示状態を draw(anime) タグとしてクリップボードに転送  |
| Ctrl + S         | スライドタグを出力                             |
| Ctrl + T         | タグ（テキスト）からデータを読み込むための画面を開きます          |
| MouseWheel       | プレビューの拡大・縮小                           |

## タグのフォーマット

タグのフォーマットはメニューバーの `Setting` -> `Show SettingPage` から設定可能です。

タグのフォーマットの文字列内では、以下の変数が使用可能です。コピーする際に、下記の文字列が実際の値に置き換えられます。

| 文字列               | 説明                          |
|-------------------|-----------------------------|
| $a                | グループA の画像ファイル名              |
| $b                | グループB の画像ファイル名              |
| $c                | グループC の画像ファイル名              |
| $d                | グループD の画像ファイル名              |
| $x                | 画像の X 座標                    |
| $y                | 画像の y 座標                    |
| $scale            | 画像の拡大率                      |
| $duration         | Slide アニメーションの長さ            |
| $distance         | Slide アニメーションの移動距離          |
| $degree           | Slide アニメーションの移動の角度（度数法）    |
| $targetLayerIndex | プレビューの状態から推定されるレイヤーインデックス*1 |

*1: 先述の命名規則に沿ったファイルが入力され、プレビューに設定されているとき、レイヤーのインデックスが自動入力される。  
具体的には、ファイル名の２文字目の数値が入力される。

例:
- `"A0101"` のとき、インデックスは `"0"`
- `"A1101"` のとき、インデックスは `"1"`

## スライドコントローラー

プレビュー画像を、指定したデータに合わせてスライドさせます。各ボタンについては以下の表を参照。

| ラベル          | 説明                                                           |
|--------------|--------------------------------------------------------------|
| Duration     | タグとして出力する際、`Duration` 属性の値として書き込まれます。                        |
| Degree       | プレビューをスライドする角度を度数法で指定します。タグとして出力する際、`Degree` 属性の値として書き込まれます。 |
| Distance     | プレビューをスライドする距離を指定します。タグとして出力する際、`Distance` 属性の値として書き込まれます。   |
| Slide (Hold) | 入力データに基づいてプレビューをスライドします。押している間だけ画像の位置が変化し、ボタンを離すと元の位置に戻ります。  |
| Slide Once   | 入力データに基づいてプレビューをスライドします。ボタンを一回押すごとにプレビューの位置が変化します。           |

## 機能タブ

画面左下のタブコントロールエリアの機能概要を以下に記述します。

### Tag History

コピーしたイメージタグの履歴が、コピーした際の画面状態と一緒に表示されます。

- 履歴項目をクリックすると、コピー時の情報が再現されます。
- タブコントロールエリア上部のボタンから表示のフィルタリングも可能です。

### Slide Tag History

コピーしたスライドタグの履歴を表示します。

- 項目を選択した状態で `Ctrl + C` で、タグを再度コピー可能です。
- 項目をダブルクリックすると、スライドコントローラーエリアにタグのデータが入力されます。

### Replace Attribute

テキストボックスに貼り付けたタグに含まれる `a`, `b`, `c`, `d` 属性の値全てを、現在選択中の画像ファイル名に置き換えます。

また、貼り付けたテキストに含まれる `id` 属性を一旦全削除し、先頭に出現するタグにだけ新しい `id` 属性を付与します。

### 設定画面記述例

    <image a="$a" b="$b" c="$c" d="$d" x="$x" y="$y" scale="$scale" targetLayerIndex="0" />
    <anime name="slide" duration="$duration" distance="$distance" degree="$degree"  repeatCount="0" />

### パース可能なタグ例

    <image a="A0101" b="B0102" c="C0103" d="D0103" x="100" y="200" scale="1" targetLayerIndex="0" />
    <draw a="A0101" b="B0102" c="C0103" d="D0103" targetLayerIndex="0" />
    <anime name="image" a="A0101" b="B0102" c="C0103" d="D0103" x="100" y="200" scale="1" targetLayerIndex="0" />
    <anime name="draw" a="A0101" b="B0102" c="C0103" d="D0103" targetLayerIndex="0" />